{% extends "base.html" %}
{% load crispy_forms_tags %}
{% block head %}
{{ form.media }}
{% endblock %}
{% block title %}
Building
{% endblock %}
{% block content %}
<div class="h-100 d-flex flex-row justify-content-between align-items-start card" style="margin: 10px;">
    <div class="flex-fill" style="margin:10px;" >
        <h1>Name : {{Building.name}}</h1>
        
        <a class="with-chevron" type="button" data-bs-toggle="collapse" href="#collapse"  aria-expanded="false" aria-controls="collapseOne">
          <h3 class="d-flex justify-content-between">Informations<span class="rotate bi bi-caret-right-fill"></span></h3>
        </a>
          <div class="collapse" id="collapse">
            <div  style="margin: 10px;">
                <div>
                    <h6>Street : {{Building.street}}</h6>
                    <h6>Administrator : {{Building.administrator}}</h6> 
                    <h6>Date created : {{Building.date_created}}</h6>
                    <h6>Date modified : {{Building.date_modified}}</h6>
                    <h6>Author : {{Building.author}}</h6>
                    <h6>Site : {{Building.site}}</h6>
                </div>
            </div>
          </div>

    </div>
    <div class="card-body" style="width: 30%;margin: 10px;">
        <h3>Localisation : </h3>
        <div id="map" class="align-self-start" style="margin-bottom: 10px;"></div>
        <h3>Image : </h3>
        {% if Building.image.url != None %}
        <img src="{{ Building.image.url }}" class="card-img-top" alt="..." style="height:300px;object-fit:scale-down;margin-top: 10px;">
      {% else %}
        <img src="" class="card-img-top" alt="...">
      {% endif %}
    </div>
</div>
<script>
    var map = L.map('map').setView("{{geometrie.centroid.coords}}".replace(/\(|\)/g, '').split(',').reverse(), 16);
    L.tileLayer('https://wgs-users.s3.amazonaws.com/cus/fonds/ems_gris/{z}/{x}/{y}.png', {
    maxZoom: 21,
    attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
    }).addTo(map);
    L.geoJSON(JSON.parse("{{ geometrie.geojson | escapejs}}")).addTo(map);
</script>
{% endblock %}

